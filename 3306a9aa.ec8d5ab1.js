(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{115:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,b=d["".concat(i,".").concat(u)]||d[u]||m[u]||o;return n?a.a.createElement(b,c(c({ref:t},l),{},{components:n})):a.a.createElement(b,c({ref:t},l))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},75:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var r=n(3),a=n(7),o=(n(0),n(115)),i={title:"Streaming backend"},c={unversionedId:"examples-streaming",id:"examples-streaming",isDocsHomePage:!1,title:"Streaming backend",description:'Both audio and video components use the same backend as an example implementation. It is called "streaming backend", since it transforms audio and video files into streams, that are sent to the frontend in accordance to the payments made by the sending wallet.',source:"@site/docs/examples-streaming.md",slug:"/examples-streaming",permalink:"/wmm-components/docs/examples-streaming",editUrl:"https://github.com/eqlabs/wmm-components/edit/main/docs/docs/examples-streaming.md",version:"current",sidebar:"someSidebar",previous:{title:"Audio",permalink:"/wmm-components/docs/examples-audio"},next:{title:"Text",permalink:"/wmm-components/docs/examples-text"}},s=[{value:"Startup",id:"startup",children:[]},{value:"New project",id:"new-project",children:[]},{value:"Tasks",id:"tasks",children:[]},{value:"Config",id:"config",children:[]}],l={rightToc:s};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,'Both audio and video components use the same backend as an example implementation. It is called "streaming backend", since it transforms audio and video files into streams, that are sent to the frontend in accordance to the payments made by the ',Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/wallet-sending"}),"sending wallet"),"."),Object(o.b)("h2",{id:"startup"},"Startup"),Object(o.b)("p",null,"To start the server, simply run the following comman in terminal from root folder:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"npm run streamingExample\n")),Object(o.b)("p",null,"This will both install the required ",Object(o.b)("strong",{parentName:"p"},"npm")," packages and start the streaming backend."),Object(o.b)("p",null,"Alternative you can start the server in development mode with following commands"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{}),"cd examples/audioAndVideo\nnpm install\nnpm install -g nodemon\nnpm run dev\n")),Object(o.b)("p",null,"Running the server with ",Object(o.b)("strong",{parentName:"p"},"nodemon")," will make it restart on every file change, speeding up the development process."),Object(o.b)("h2",{id:"new-project"},"New project"),Object(o.b)("p",null,"When starting a new project you have two options: either to use the current example project and morph it into your own project, or create another backend for your project and use the ",Object(o.b)("em",{parentName:"p"},"audioAndVideo")," backend only for streaming the media files and checking Web Monetization receipts."),Object(o.b)("p",null,"In the latter case you can delete the files in the ",Object(o.b)("em",{parentName:"p"},"public")," folder and you may also want to limit the CORS requests to only your own servers (by default all CORS requests are allowed)."),Object(o.b)("h2",{id:"tasks"},"Tasks"),Object(o.b)("p",null,"The backend has three main tasks:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Verifies ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/receipt"}),"receipts")," that it receives from the frontend."),Object(o.b)("li",{parentName:"ul"},"Serves the video and audio files ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/pipeStream"}),"streams")," located in ",Object(o.b)("em",{parentName:"li"},"/media")," -folder to the frontend."),Object(o.b)("li",{parentName:"ul"},"Handles a user specific ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/accounts"}),"account"),", where valid receipts increase the balance and streaming data to the frontend deducts from it.")),Object(o.b)("p",null,"When balance is close to zero, it waits for new receipts before serving the data to the frontend."),Object(o.b)("h2",{id:"config"},"Config"),Object(o.b)("p",null,"The required cost for the video is typically defined in time (minutes) but it is also possible to define it in the amount of data being transferred (megabytes)."),Object(o.b)("p",null,"The cost, payment address and many other details can be modified in ",Object(o.b)("inlineCode",{parentName:"p"},"examples/audioAndVideo/config.js")," file."))}p.isMDXComponent=!0}}]);